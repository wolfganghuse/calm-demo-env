{"status":{},"contains_secrets":true,"product_version":"3.2.0","spec":{"description":"Rancher Host","resources":{"client_attrs":{},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3fc43338_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"7d5eddd4_runbook","main_task_local_reference":{"kind":"app_task","name":"3fc43338_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a200fcf8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b3b1e669_runbook","main_task_local_reference":{"kind":"app_task","name":"a200fcf8_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"fea3edbf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"0938823c_runbook","main_task_local_reference":{"kind":"app_task","name":"fea3edbf_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e3cd3f21_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b7be7476_runbook","main_task_local_reference":{"kind":"app_task","name":"e3cd3f21_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"48aa312a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f991b1eb_runbook","main_task_local_reference":{"kind":"app_task","name":"48aa312a_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"Service1","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"svc_Rancher"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c5e15f7d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3782912b_runbook","main_task_local_reference":{"kind":"app_task","name":"c5e15f7d_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"svc_Rancher"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b2b773f6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"96574c92_runbook","main_task_local_reference":{"kind":"app_task","name":"b2b773f6_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"svc_Rancher","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":true,"login_credential_local_reference":{"kind":"app_credential","name":"cred_os"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{}}}},"os_type":"Linux","create_spec":{"name":"rancher-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"64cf3bea-fc2f-4827-9ef6-fd1bce2ef86f"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{cred_os.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"8c4f7de3-544f-426d-98a2-40986fb657e4","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS7","uuid":"c7edd112-7b4a-42db-ba9a-0df17223857e"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":true,"secret_reference":{}},"value":"U6w4BJagPLUHwUlCQGUToJ137KbGTROQh9u1m7CBThpxnKeJnk6hLgTEq5cclCVw\/TzqI7+eGaQ9+B8JBvWMC8579RwaAcAAIWOHRgIXGJm5Sm7K2HvbmUHl01lR8A4vzFIKnJQECdlKn6\/CclrFJMiGi6HeSDyyqBIfdP\/4kjVbIndaG0XO+dcd9cmmRcDI6VS0bRrvdPpolEFLyQs1n4uIHh2TKVlq2wiRVIKNJHdErNWrox7Z8P+ThnY\/\/WhMsu\/R8jpkCkniuzc4ies6oTtPfAiHaNjzwVUkHwLAiYt5vmCVHM2rvlaXlP8d8yt6a4qwb9\/WPv\/RqWmWUt6D1L43E\/yVLgeHmRNmum3wps6\/4\/2voyC3V1Ph8ZiJbjdHGJmjTQHPcKUG0l+JaKTB8neS40fYaUgTjdCH5uchYJTyiA\/tMIpnAcyGqSjAssDYsLnKOKE6PkcImLG7E+bYAvPBEaWiv9UhI1Q7BPXaDe2Ao3nZX4hoz91Xfw8VjDBC4mvLJ6LOfyWMg9QoyvaMeAxu+5j8Us8ftLpIbsHVhQcbzX\/4w92ufBetDQnIKwRbRCafdPRZpKpFvH1oVhSOxrIbQ6Ky85ia0w22GbgweI78kp4KpUR+CcfLUNOfDZjYa9R6UUpffMQy5cVim8n2lYun8clZo7zce4FgzK3907arhb7FUOUQV7Ico9ukHoMzMcaNRqv7fSrAF8uAstCMNfkiru84qPW\/ozRz1u98dIr8WITVSd72eHUKebFu+5AZpef28C75U1DumXZG2lW2jyYInOVsW0A3b0G1E+XrPjhw94GoSRViV6GQGXyLF4GQHzxJueI19RcR7oHSEHa5uln8DuBZp6Ue37fD2dmXHtvnMJJPi\/1LqcYs5+4UO0ZBogD+B5dgYmy\/q2Ix4xWMlmDBRj7P9OhQeg\/rLogrBSty4ksrFB3CAl2PCHJAuWKpVmSu\/Z\/pb+bCoK4h1OIhNtv0KdEmnFIBZRE\/7BBjRMHUZX4RBmEZ84IqkpHo6GoTSnsy\/9Av4wi5uTC38diCMNWt82qM4qykLyqE\/eXIKz\/hQ8rwCVkE2om+YdWC43qwImahprtRvsCM\/RPKwUF0wZobc3LPhdAboZP5snOudKZ2ps6Zo+Ch6IZVeGijM2qr+mzRe+tIin\/1aL3ta8OOsMssArUEGKymDt7mk2JEPACppgXtm4LaoIinaeJECO1AoQllCA+4qCaml0eUODVoHISAdbfG7uXHd0\/FrKbyJwXclxlh768C\/PhRjkIc\/3DZWhuUH0KApSrCKUU6GrN1C2BA8Tj24pw2p2mLTOwohBbQg2DL2r0r8TYAIeEDNZ8cLp8LTkD5h0nO04qGQwNxU8KIebH8BPWZCxAUS38xpwOVrrudbcBqu5R8S8d8MmjJ0McZkBbja9kUyiIrdusgX1rFvKEgrPxtfrnQcq8FpEummWIrs4ozQZwoqQKxy\/FlHXAk8JeSMzoqHp\/sC\/ELeXGb5v1pt58qAEpDEx\/iWRFw9D\/m60i8laPk4SQYx8blcXb9qXiVf8HgFpzMW1q1jWms7Ls\/euxmO6n2cHLlaZgsd5iNjIw+I0d7ByRcoZeAVw0o3lpa9y5QMMqPoCFJj6OHxr8y1TGGsFjb9Ysw0RWhfWfypyVf4FgJVV9j5aOG2QJi7u2EJGvFvFIPVHyjHkf6EPnhmwSw7lUOtgdTHDj+TzAYt\/7JQrez1NzLIiw0yzoixDxPy5CMIPzZN2j3SHSsrHNLF6O5IFt37nSJlBCTvW+CMZ4KzZzch39W1BedZYo4KSBPa0BtAO1Q2nbc0yuUBCNiAka\/8pMGmWLymcn3mtel7q5TqLcpO0oY1Qdkor2ZEjFIjrbPaSojnz1hy66Ud9gmCEZLnFle8mgVwFBg1NOkMCGmhoiTPi6hsVAJmH\/5mqogo5dkbjVREpCbjRPybgfTS0492GsR8JMEf5KK974Eny0XTPZMv5y612AbcjaIu\/iPOzEMHQiN3fFLppTwTxyX+kOdjenenOayCdwhwSPEWQZ+BRPrVXHGchqWvoWGW35wvdO6d6AAAEQ8RY534u+M9WnmlPhUVEHdPlH52nnR\/+kW14Krs5+4urE092ylbJd1nmXqbeqg0cBrfTfgytb3KuE+LFI7ZTh9GkUxI1x2bB9qXJxSVrsvmEMNiYMiNURqFYjTfj9Gp+Ajw7srzYaaGybgbypPT856qAeGSGrVNXEk6LgT+vR4WBHq7MFiVV2VBnlctdsoI4mU\/hFPTx+z0Vqv9cO57\/AM:utf-8"},"name":"cred_os"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Service1"}],"name":"Package1","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install Packages"},{"kind":"app_task","name":"Install Docker"}],"name":"286a38ce_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Install Packages"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Install Docker"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Packages","attrs":{"script":"sudo yum -y install https:\/\/packages.endpoint.com\/rhel\/7\/os\/x86_64\/endpoint-repo-1.7-1.x86_64.rpm\nsudo yum -y install wget git\n\nsudo yum install -y yum-utils\nsudo yum-config-manager --add-repo https:\/\/download.docker.com\/linux\/centos\/docker-ce.repo\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Docker","attrs":{"exit_status":[],"script":"sudo yum install -y docker-ce docker-ce-cli containerd.io\nsudo groupadd docker\nsudo usermod -aG docker ${USER}\n\nsudo service docker start\nsudo systemctl enable docker","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"cred_os"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"cc380fa7_runbook","main_task_local_reference":{"kind":"app_task","name":"286a38ce_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"2deac6fa_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"53ad5cbf_runbook","main_task_local_reference":{"kind":"app_task","name":"2deac6fa_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"98854c90_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1"}],"substrate_local_reference":{"kind":"app_substrate","name":"svc_Rancher"},"variable_list":[],"description":""}],"environment_reference_list":[],"description":"","action_list":[{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Start Rancher Container"}],"name":"2ec5a0aa_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Start Rancher Container","attrs":{"exit_status":[],"script":"sudo docker run --privileged -d --restart=unless-stopped -p 80:80 -p 443:443 rancher\/rancher","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"cred_os"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"80bf6950_runbook","main_task_local_reference":{"kind":"app_task","name":"2ec5a0aa_dag"},"variable_list":[]},"name":"Untitled Action1"}],"name":"Default","variable_list":[]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"cred_os"},"type":"USER"},"name":"Rancher"},"api_version":"3.0","metadata":{"last_update_time":"1613666258125210","kind":"blueprint","spec_version":5,"creation_time":"1613039323031320","categories":{"TemplateType":"Vm"},"name":"Rancher"}}